<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Detector Pro</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --primary:#00f2fe;
  --secondary:#4facfe;
  --bg:#0f172a;
  --card:rgba(30,41,59,0.8);
  --text:#f8fafc;
}

body{
  font-family:'Inter',sans-serif;
  background:var(--bg);
  color:var(--text);
  margin:0;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}

.container{
  background:var(--card);
  backdrop-filter:blur(20px);
  padding:30px;
  border-radius:24px;
  width:100%;
  max-width:600px;
  box-shadow:0 20px 40px rgba(0,0,0,0.4);
  text-align:center;
}

.tabs{
  display:flex;
  margin-bottom:20px;
}

.tab-btn{
  flex:1;
  padding:10px;
  border:none;
  border-radius:12px;
  margin:0 5px;
  background:rgba(0,0,0,0.2);
  color:#94a3b8;
  cursor:pointer;
  font-weight:600;
}

.tab-btn.active{
  background:var(--secondary);
  color:white;
  box-shadow:0 4px 15px rgba(79,172,254,0.4);
}

textarea{
  width:100%;
  height:150px;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,0.1);
  background:rgba(0,0,0,0.2);
  color:white;
  resize:none;
}

.file-upload{
  border:2px dashed rgba(255,255,255,0.2);
  padding:25px;
  border-radius:12px;
  cursor:pointer;
  margin-bottom:12px;
}

.file-upload:hover{
  border-color:var(--primary);
  background:rgba(255,255,255,0.05);
}

.check-btn{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:linear-gradient(90deg,var(--secondary),var(--primary));
  color:white;
  font-weight:700;
  cursor:pointer;
  font-size:1.1rem;
}

.check-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 8px 20px rgba(0,242,254,0.3);
}

#status{margin-top:12px;font-size:0.95rem;color:var(--primary);}
.result-container{margin-top:20px; display:flex; flex-direction:column; align-items:center;}
#gauge{width:200px; height:100px;}
#percLabel{position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:1.5rem; font-weight:bold;}
</style>
</head>
<body>

<div class="container">
<h1>AI Detector Pro</h1>

<div class="tabs">
  <button class="tab-btn active" onclick="setMode('file')">üìÅ –§–∞–π–ª</button>
  <button class="tab-btn" onclick="setMode('text')">‚úçÔ∏è –¢–µ–∫—Å—Ç</button>
</div>

<div id="fileSection">
  <div class="file-upload" onclick="document.getElementById('fileInput').click()">
    <p id="fileNameDisplay">–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∞–±–æ –ø–µ—Ä–µ—Ç—è–≥–Ω—ñ—Ç—å —Ñ–∞–π–ª —Å—é–¥–∏</p>
    <input type="file" id="fileInput" hidden accept=".txt,.docx,.pptx" onchange="updateFileName()">
  </div>
</div>

<div id="textSection" style="display:none;">
  <textarea id="textInput" placeholder="–í—Å—Ç–∞–≤—Ç–µ —Ç–µ–∫—Å—Ç —Å—é–¥–∏ (–º—ñ–Ω—ñ–º—É–º 10 —Å–ª—ñ–≤)"></textarea>
</div>

<button class="check-btn" onclick="processAnalysis()">–ü–ï–†–ï–í–Ü–†–ò–¢–ò</button>

<p id="status"></p>

<div class="result-container" id="resultArea" style="display:none; position:relative;">
  <svg id="gauge" viewBox="0 0 100 50">
    <path d="M10,50 A40,40 0 0,1 90,50" fill="none" stroke="#1e293b" stroke-width="8" stroke-linecap="round"/>
    <path id="gaugeProgress" d="M10,50 A40,40 0 0,1 90,50" fill="none" stroke="url(#grad)" stroke-width="8" stroke-dasharray="126" stroke-dashoffset="126" stroke-linecap="round"/>
    <defs>
      <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" style="stop-color:#4facfe"/>
        <stop offset="100%" style="stop-color:#00f2fe"/>
      </linearGradient>
    </defs>
  </svg>
  <div id="percLabel">0%</div>
  <h2 id="verdictLabel"></h2>
</div>

<script>
let currentMode='file';
let lastCheckTime=0;

function setMode(mode){
  currentMode=mode;
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  event.target.classList.add('active');
  document.getElementById('fileSection').style.display=mode==='file'?'block':'none';
  document.getElementById('textSection').style.display=mode==='text'?'block':'none';
  document.getElementById('status').innerText="";
  document.getElementById('resultArea').style.display='none';
}

function updateFileName(){
  const input=document.getElementById('fileInput');
  document.getElementById('fileNameDisplay').innerText = input.files[0]?input.files[0].name:"–§–∞–π–ª –Ω–µ –æ–±—Ä–∞–Ω–æ";
}

function processAnalysis(){
  const now=Date.now();
  if(now-lastCheckTime<10000){
    const sec=Math.ceil((10000-(now-lastCheckTime))/1000);
    return alert(`‚è≥ –ó–∞—á–µ–∫–∞–π—Ç–µ ${sec} —Å–µ–∫—É–Ω–¥ –ø–µ—Ä–µ–¥ –Ω–∞—Å—Ç—É–ø–Ω–æ—é –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é`);
  }
  lastCheckTime=now;

  let payload;
  if(currentMode==='file'){
    const file=document.getElementById('fileInput').files[0];
    if(!file) return alert("–û–±–µ—Ä—ñ—Ç—å —Ñ–∞–π–ª");
    payload=new FormData();
    payload.append('file',file);
  } else {
    const text=document.getElementById('textInput').value.trim();
    if(text.length<10) return alert("–¢–µ–∫—Å—Ç –∑–∞–Ω–∞–¥—Ç–æ –∫–æ—Ä–æ—Ç–∫–∏–π");
    payload=JSON.stringify({text:text});
  }

  document.getElementById('status').innerText="‚è≥ –û–ø—Ä–∞—Ü—å–æ–≤—É—î–º–æ...";
  document.getElementById('resultArea').style.display='none';

  setTimeout(()=>{
    fetch("/predict",{
      method:"POST",
      headers:currentMode==='file'?{}:{'Content-Type':'application/json'},
      body:payload
    }).then(r=>r.json()).then(data=>{
      document.getElementById('resultArea').style.display='block';
      animateGauge(data.ai_percent,data.verdict);
    }).catch(e=>{
      document.getElementById('status').innerText="‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∞–Ω–∞–ª—ñ–∑—ñ";
    });
  },5000);
}

function animateGauge(target,verdict){
  const gauge=document.getElementById('gaugeProgress');
  const percLabel=document.getElementById('percLabel');
  const verdictLabel=document.getElementById('verdictLabel');

  let val=0;
  const interval=setInterval(()=>{
    val++;
    const offset=126 - (126*val/100);
    gauge.style.strokeDashoffset=offset;
    percLabel.innerText=val+"%";
    if(val>=target){
      clearInterval(interval);
      percLabel.innerText=target+"%";
      verdictLabel.innerText=verdict;
      verdictLabel.style.color=target>=50?'#ff4d4d':'#00f2fe';
      document.getElementById('status').innerText="";
    }
  },20);
}
</script>

</body>
</html>
