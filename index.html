<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Detector Pro</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --primary:#00f2fe;
  --secondary:#4facfe;
  --bg:#0f172a;
  --card:rgba(30,41,59,0.8);
  --text:#f8fafc;
}

body{
  font-family:'Inter',sans-serif;
  background:var(--bg);
  color:var(--text);
  margin:0;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}

.container{
  background:var(--card);
  backdrop-filter:blur(20px);
  padding:30px;
  border-radius:24px;
  width:100%;
  max-width:600px;
  box-shadow:0 20px 40px rgba(0,0,0,0.4);
  text-align:center;
}

.tabs{
  display:flex;
  margin-bottom:20px;
}

.tab-btn{
  flex:1;
  padding:10px;
  border:none;
  border-radius:12px;
  margin:0 5px;
  background:rgba(0,0,0,0.2);
  color:#94a3b8;
  cursor:pointer;
  font-weight:600;
}

.tab-btn.active{
  background:var(--secondary);
  color:white;
  box-shadow:0 4px 15px rgba(79,172,254,0.4);
}

textarea{
  width:100%;
  height:150px;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,0.1);
  background:rgba(0,0,0,0.2);
  color:white;
  resize:none;
}

.file-upload{
  border:2px dashed rgba(255,255,255,0.2);
  padding:25px;
  border-radius:12px;
  cursor:pointer;
  margin-bottom:12px;
}

.file-upload:hover{
  border-color:var(--primary);
  background:rgba(255,255,255,0.05);
}

.check-btn{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:linear-gradient(90deg,var(--secondary),var(--primary));
  color:white;
  font-weight:700;
  cursor:pointer;
  font-size:1.1rem;
}

.check-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 8px 20px rgba(0,242,254,0.3);
}

#status{margin-top:12px;font-size:0.95rem;color:var(--primary);}
#result{margin-top:12px;font-size:1.5rem;font-weight:700;}

</style>
</head>
<body>

<div class="container">
<h1>AI Detector Pro</h1>

<div class="tabs">
  <button class="tab-btn active" onclick="setMode('file')">üìÅ –§–∞–π–ª</button>
  <button class="tab-btn" onclick="setMode('text')">‚úçÔ∏è –¢–µ–∫—Å—Ç</button>
</div>

<div id="fileSection">
  <div class="file-upload" onclick="document.getElementById('fileInput').click()">
    <p id="fileNameDisplay">–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∞–±–æ –ø–µ—Ä–µ—Ç—è–≥–Ω—ñ—Ç—å —Ñ–∞–π–ª —Å—é–¥–∏</p>
    <input type="file" id="fileInput" hidden accept=".txt,.docx,.pptx" onchange="updateFileName()">
  </div>
</div>

<div id="textSection" style="display:none;">
  <textarea id="textInput" placeholder="–í—Å—Ç–∞–≤—Ç–µ —Ç–µ–∫—Å—Ç —Å—é–¥–∏ (–º—ñ–Ω—ñ–º—É–º 10 —Å–ª—ñ–≤)"></textarea>
</div>

<button class="check-btn" onclick="processAnalysis()">–ü–ï–†–ï–í–Ü–†–ò–¢–ò</button>

<p id="status"></p>
<h2 id="result"></h2>

</div>

<script>
let currentMode='file';

function setMode(mode){
  currentMode=mode;
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  event.target.classList.add('active');
  document.getElementById('fileSection').style.display=mode==='file'?'block':'none';
  document.getElementById('textSection').style.display=mode==='text'?'block':'none';
  status.innerText="";
  result.innerText="";
}

function updateFileName(){
  const input=document.getElementById('fileInput');
  document.getElementById('fileNameDisplay').innerText = input.files[0]?input.files[0].name:"–§–∞–π–ª –Ω–µ –æ–±—Ä–∞–Ω–æ";
}

let lastCheckTime=0;
function processAnalysis(){
  const now=Date.now();
  if(now-lastCheckTime<10000){
    const sec=Math.ceil((10000-(now-lastCheckTime))/1000);
    return alert(`‚è≥ –ó–∞—á–µ–∫–∞–π—Ç–µ ${sec} —Å–µ–∫—É–Ω–¥ –ø–µ—Ä–µ–¥ –Ω–∞—Å—Ç—É–ø–Ω–æ—é –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é`);
  }
  lastCheckTime=now;

  let payload;
  if(currentMode==='file'){
    const file=document.getElementById('fileInput').files[0];
    if(!file) return alert("–û–±–µ—Ä—ñ—Ç—å —Ñ–∞–π–ª");
    payload=new FormData();
    payload.append('file',file);
  } else {
    const text=document.getElementById('textInput').value.trim();
    if(text.length<10) return alert("–¢–µ–∫—Å—Ç –∑–∞–Ω–∞–¥—Ç–æ –∫–æ—Ä–æ—Ç–∫–∏–π");
    payload=JSON.stringify({text:text});
  }

  status.innerText="‚è≥ –û–ø—Ä–∞—Ü—å–æ–≤—É—î–º–æ...";
  result.innerText="";

  setTimeout(()=>{
    fetch("/predict",{
      method:"POST",
      headers:currentMode==='file'?{}:{'Content-Type':'application/json'},
      body:payload
    })
    .then(r=>r.json())
    .then(data=>{
      animateResult(data.ai_percent,data.verdict);
    })
    .catch(e=>{
      status.innerText="‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∞–Ω–∞–ª—ñ–∑—ñ";
    });
  },5000);
}

function animateResult(target,verdict){
  let val=0;
  const interval=setInterval(()=>{
    val++;
    result.innerText=val+"% AI";
    if(val>=target){
      clearInterval(interval);
      result.innerText=target+"% AI ‚Äî "+verdict;
      status.innerText="";
    }
  },20);
}
</script>

</body>
</html>
